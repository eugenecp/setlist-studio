# Dependabot configuration for automated dependency updates
# Manages NuGet packages, Docker images, and GitHub Actions
# https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2
updates:
  # .NET NuGet Package Updates
  # Monitors all .csproj and .sln files for dependency updates
  - package-ecosystem: "nuget"
    directory: "/"
    schedule:
      interval: "weekly"           # Check for updates weekly
      day: "monday"               # Run on Mondays
      time: "06:00"               # At 6:00 AM UTC
      timezone: "UTC"             # Explicit timezone specification
    open-pull-requests-limit: 10  # Allow up to 10 open PRs
    reviewers:
      - "eugenecp"                # Request review from repository owner
    assignees:
      - "eugenecp"                # Assign PRs to repository owner
    commit-message:
      prefix: "‚¨ÜÔ∏è"                # Emoji prefix for commit messages
      prefix-development: "‚¨ÜÔ∏è"    # Same prefix for development dependencies
      include: "scope"             # Include dependency scope in commit messages
    labels:
      - "dependencies"            # Label for dependency updates
      - "nuget"                   # NuGet-specific label
      - "security"                # Security-related updates
    # Allow all dependency types (direct and indirect dependencies)
    allow:
      - dependency-type: "all"
    ignore:
      # Ignore major version updates for Microsoft packages to maintain stability
      # (Security updates will still be processed regardless of this setting)
      - dependency-name: "Microsoft.*"
        update-types: ["version-update:semver-major"]
    # Group related dependencies together in single PRs
    groups:
      microsoft-packages:
        patterns:
          - "Microsoft.*"
        update-types:
          - "minor"
          - "patch"

  # Docker Image Updates
  # Monitors Dockerfile and docker-compose files for base image updates
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"           # Check for updates weekly
      day: "monday"               # Run on Mondays
      time: "06:00"               # At 6:00 AM UTC
      timezone: "UTC"             # Explicit timezone specification
    open-pull-requests-limit: 5   # Limit Docker update PRs
    reviewers:
      - "eugenecp"                # Request review from repository owner
    assignees:
      - "eugenecp"                # Assign PRs to repository owner
    commit-message:
      prefix: "üê≥"                # Docker emoji prefix for commit messages
      include: "scope"             # Include scope in commit messages
    labels:
      - "dependencies"            # Label for dependency updates
      - "docker"                  # Docker-specific label
      - "security"                # Security-related updates

  # GitHub Actions Updates
  # Monitors .github/workflows/ for action version updates
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"           # Check for updates weekly
      day: "monday"               # Run on Mondays
      time: "06:00"               # At 6:00 AM UTC
      timezone: "UTC"             # Explicit timezone specification
    open-pull-requests-limit: 5   # Limit GitHub Actions update PRs
    reviewers:
      - "eugenecp"                # Request review from repository owner
    assignees:
      - "eugenecp"                # Assign PRs to repository owner
    commit-message:
      prefix: "üîÑ"                # Workflow emoji prefix for commit messages
      include: "scope"             # Include scope in commit messages
    labels:
      - "dependencies"            # Label for dependency updates
      - "github-actions"          # GitHub Actions-specific label
      - "security"                # Security-related updates